/// <reference types="node" />
import EventEmitter from 'events';
import { SlackOAuthClient } from 'messaging-api-slack';
import Session from '../session/Session';
import SlackContext from '../context/SlackContext';
import SlackEvent, { EventAPITypes, Message, SlackRawEvent } from '../context/SlackEvent';
import { Connector } from './Connector';
export declare type SlackUser = {
    id: string;
};
declare type EventsAPIBody = {
    token: string;
    team_id: string;
    api_app_id: string;
    type: EventAPITypes;
    event: Message;
    authed_users: string[];
    event_id: string;
    event_time: number;
};
export declare type SlackRequestBody = EventsAPIBody | {
    payload: string;
};
declare type CommonConstructorOptions = {
    skipProfile?: boolean | null;
    verificationToken?: string;
};
declare type ConstructorOptionsWithoutClient = {
    accessToken: string;
    origin?: string;
} & CommonConstructorOptions;
declare type ConstructorOptionsWithClient = {
    client: SlackOAuthClient;
} & CommonConstructorOptions;
declare type ConstructorOptions = ConstructorOptionsWithoutClient | ConstructorOptionsWithClient;
export default class SlackConnector implements Connector<SlackRequestBody, SlackOAuthClient> {
    _client: SlackOAuthClient;
    _verificationToken: string;
    _skipProfile: boolean;
    constructor(options: ConstructorOptions);
    _getRawEventFromRequest(body: SlackRequestBody): SlackRawEvent;
    _isBotEventRequest(body: SlackRequestBody): boolean;
    readonly platform: string;
    readonly client: SlackOAuthClient;
    getUniqueSessionKey(body: SlackRequestBody): string;
    updateSession(session: Session, body: SlackRequestBody): Promise<void>;
    mapRequestToEvents(body: SlackRequestBody): SlackEvent[];
    createContext(params: {
        event: SlackEvent;
        session: Session | null;
        initialState?: Record<string, any> | null;
        requestContext?: Record<string, any> | null;
        emitter?: EventEmitter | null;
    }): SlackContext;
    verifySignature(tokenFromBody: string): boolean;
    preprocess({ method, body, }: {
        method: string;
        headers: Record<string, any>;
        query: Record<string, any>;
        rawBody: string;
        body: Record<string, any>;
    }): {
        shouldNext: boolean;
        response?: undefined;
    } | {
        shouldNext: boolean;
        response: {
            status: number;
            body: any;
        };
    };
}
export {};
//# sourceMappingURL=SlackConnector.d.ts.map